# AI 컨텍스트 문서 (반려묘 병상일지 앱)

> AI(코딩 어시스턴트)가 **프로젝트 방향, 설계 원칙, MVP 범위**를 빠르게 이해하기 위한 요약 문서

---

## 1. 프로젝트 개요

### 서비스 목적
- 반려묘의 **일상·병상 기록을 장기 누적**
- 집사가 **병원 진료 시 바로 보여줄 수 있는 데이터** 제공
- 기록 데이터의 가치를 기반으로 **부분 유료화**

### 핵심 가치
| 원칙 | 설명 |
|------|------|
| 기록은 자산이다 | 모든 데이터는 영구 보존 |
| 삭제하지 않는다 | 데이터 삭제 기능 없음 |
| "보는 권한"만 제한 | 무료/유료는 접근 제어로 구분 |

---

## 2. 플랫폼 & 기술 스택

| 구분 | 기술 | 비고 |
|------|------|------|
| 모바일 앱 | React Native + Expo (Managed) | Android 전용 |
| 웹 | Next.js (App Router) | 소개/신뢰/정책 페이지 |
| 데이터 저장 | SQLite (expo-sqlite) | 로컬 저장, 텍스트/숫자 위주 |
| 서버 | 없음 | MVP 단계 |
| 로그인 | 없음 | 디바이스 단위 |
| 사진/영상 | 없음 | MVP 제외 |

---

## 3. 데이터 정책 ⚠️ 중요

### 핵심 원칙
```
- 자동 삭제 없음
- 수년 누적 전제
- 데이터는 항상 저장되어 있으며, 삭제하지 않는다
```

### 무료 vs 유료
| 구분 | 접근 범위 | UI 처리 |
|------|----------|---------|
| 무료 | 최근 15일 | 정상 표시 |
| 무료 | 15일 이전 | 흐림(Blur) + Lock 아이콘 |
| 유료 | 전체 기간 | 정상 표시 |

> 차이는 **UI 접근 제어**로만 구분. 데이터 자체는 동일하게 저장됨.

---

## 3.1 날짜 기준 데이터 규칙 ⚠️ 중요

> 모든 기록은 **하루 1 row** 기준

| 데이터 타입 | 같은 날 처리 |
|------------|-------------|
| 배변/구토 | 누적 카운트 (+1) |
| 수치 데이터 | 덮어쓰기 또는 수정 |

```
⚠️ 이 규칙 미정의 시 차트 구현 복잡도 급증
```

---

## 3.2 다묘 확장 구조

> MVP는 1묘 전용이나, 내부 구조는 확장 가능하게 설계

| 항목 | 설계 |
|------|------|
| 내부 구조 | `petId` 항상 포함 |
| UI | 지금은 숨김 |
| 확장 | 나중에 유료 포인트로 활용 가능 |

---

## 4. 주요 기록 도메인

### 4.1 기본 컨디션 (일일 누적)
| 항목 | 입력 방식 | 비고 |
|------|----------|------|
| 오줌 횟수 | +1 버튼 | 확인 시마다 누적 |
| 똥 횟수 | +1 버튼 | 설사 여부 별도 카운트 |
| 구토 횟수 | +1 버튼 | 색상 라벨: 투명/흰색/사료토 등 |
| 특이사항 | 메모 | 자유 입력 |

> **UX**: 하루 한 번 입력 ❌ → 확인 시마다 누적 입력 ✅

---

### 4.2 사료 기호성
| 항목 | 값 |
|------|-----|
| 사료 타입 | 건사료 / 캔 / 기타 |
| 기호성 | 잘먹음 / 보통 / 거부 |
| 코멘트 | 자유 메모 |

---

### 4.3 약 / 영양제
- 유저가 직접 이름 입력 → 라벨 생성
- 복용 여부 체크
- 개수 제한 없음
- 약 / 영양제 동일 구조

---

### 4.4 병원 기록
- 병원 방문 메모
- 진단/처방 요약
- 자유 메모 영역

---

### 4.5 주기적 수치 기록 (그래프용)
| 항목 | 비고 |
|------|------|
| 체중 | 수치형 데이터 |
| 음수량 | ❌ 기록 안 함 (자발적 음수) |
| 표시 | 날짜 기준 추이 그래프 |

---

### 4.6 병원용 차트
**목적**: 증상 변화 + 약 복용 기간을 한 화면에 표시

```
X축: 날짜
Y축: 증상 수치 / 횟수
오버레이: 약 복용 기간 Bar
```

---

### 4.7 사용자 커스텀 수치 차트
- 혈액검사 등 유저가 수치명 직접 입력
- 값 입력 → 추이 그래프
- 다중 차트 가능

---

### 4.8 수액 및 강수 기록
| 항목 | 비고 |
|------|------|
| 날짜 | 필수 |
| 수액 종류 | 피하 / 정맥 |
| 강수 | 강제 급수 (ml 단위) |
| 용량 | 숫자 |
| 반응/메모 | 자유 입력 |

> 집사 직접 수액 투여 케이스 고려 (상세는 MVP 이후)

---

## 5. 결제 정책

| 항목 | 값 |
|------|-----|
| 결제 방식 | Google Play In-App Purchase |
| 상태 저장 | `isPro` boolean 로컬 저장 |
| 서버 검증 | 없음 (MVP 단계) |

---

## 6. 설계 원칙 요약

| 원칙 | 설명 |
|------|------|
| 서버 도입 시점 | 필요해질 때 |
| 우선순위 | 기록 구조 > UX |
| 데이터 정책 | 삭제 대신 접근 제한 |
| 사용자 중심 | 집사 실사용 흐름 최우선 |
| 최종 목표 | 병원에 보여줄 수 있어야 함 |
