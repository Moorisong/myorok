# 🔐 반려묘 병상일지 앱 – 보안 명세 (v1)

> 앱 잠금 및 인증 관련 보안 정책 정의

---

## 1. 개요

| 항목 | 내용 |
|------|------|
| 목적 | 민감한 반려묘 건강 데이터 보호 |
| 인증 방식 | PIN + 생체 인증 (선택) |
| 서버 연동 | 없음 (로컬 전용) |

---

## 2. PIN 설정 흐름

1. 설정 화면에서 PIN 설정 진입
2. PIN 2회 입력 (확인)
3. 해시 처리
4. SecureStore에 저장
5. 잠금 기능 활성화

---

## 3. PIN 인증 흐름

1. 앱 실행 또는 포그라운드 진입
2. PIN 입력 화면 노출
3. 입력 PIN 해시 계산
4. SecureStore 값과 비교
5. 일치 시 앱 진입 허용

---

## 4. 생체 인증 (선택)

### 사용 방식
- OS 생체 인증 API 사용
- 인증 성공/실패 여부만 사용
- 생체 정보는 앱에서 저장하지 않음

### 정책
- 생체 인증 실패 시 → PIN 입력 fallback
- 생체 인증은 PIN 설정 이후에만 활성화 가능

---

## 5. PIN 분실 대응

- **PIN 찾기 기능 없음**
- 보안 정책상 복구 불가

### 초기화 방법
- 앱 데이터 초기화
- 또는 앱 재설치

> ⚠️ PIN 분실 시 기존 데이터는 복구 불가 (명시 필요)

---

## 6. UX 정책

- 앱 최초 실행 시 잠금 없음
- 설정에서 사용자가 직접 활성화
- 잠금 활성화 상태는 설정 화면에 명확히 표시
- 잘못된 PIN 입력 시 에러 메시지 표시

---

## 7. 문서/스토어 안내 문구 (요약)

> 앱 잠금 PIN은 기기 보안 저장소에 해시 형태로 저장되며, 평문으로 저장되지 않습니다.  
> PIN 분실 시 보안상 복구가 불가능합니다.

### ⚠️ 문서/화면에 꼭 써야 할 문구 (중요)

```
보안을 위해 PIN은 복구할 수 없습니다.
PIN을 잊은 경우 앱 데이터를 초기화해야 합니다.
```

---

## 8. 기술 스택 요약

| 항목 | 기술 |
|------|------|
| PIN 저장 | Expo SecureStore |
| 해시 | 단방향 해시 함수 |
| 생체 인증 | Expo LocalAuthentication (선택) |
| 서버 | 연동 없음 |
