# Calendar Agent Reference

## Calendar Spec (CALENDAR_SPEC.md)
# 📅 캘린더 화면 명세 (v1)

> **핵심 역할**
> - 과거 기록 조회 전용
> - 히스토리 패턴 파악
> - **수정 불가 (조회 Only)**

---

## 1. UI 구조

### 1.1 최상단 헤더
- `<` (이전 달) `YYYY년 MM월` `>` (다음 달)
- 오늘로 돌아가기 버튼 (To Today)

### 1.2 월간 달력 (Calendar View)
- 라이브러리: `react-native-calendars` 사용
- **인디케이터 (Dot)** 표시 규칙:
  - 기본: 기록 있는 날 (회색 점)
  - 🔴 경고: 구토 or 설사 or 식욕부진
  - 💊 투약: 약 복용 완료
  - 💧 수액: 수액 진행

### 1.3 하단 요약 카드 (Day Summary)
- 달력에서 날짜 선택 시 하단에 노출 (Native Modal 아님, 인라인 뷰)
- **구성 요소**:
  - `MM월 DD일 (요일)` 헤더
  - **증상 요약**: 소변 N회, 대변 N회, 구토 N회
  - **특이사항**: 사용자가 기록한 메모 노출
  - **수액/약**: 투여 여부 뱃지

---

## 2. 인터랙션 규칙

1. **날짜 터치**:
   - 하단 요약 카드 데이터 갱신
   - 미래 날짜 선택 시: "미래의 기록은 볼 수 없어요" 토스트

2. **오늘 날짜 선택 시**:
   - 하단 카드에 "[오늘 기록하러 가기]" 버튼 노출
   - 탭 이동 (`navigation.navigate('Today')`)

3. **스와이프**:
   - 좌우 스와이프로 월 이동 가능

---

## 3. 데이터 로딩 전략

- **월 단위** 데이터 로딩 (`SELECT * FROM records WHERE date LIKE '2023-10-%'`)
- 로컬 DB이므로 전체 로딩 후 클라이언트에서 매핑

---

## 4. 예외 처리

- **데이터 없음**: "기록이 없는 날이에요 zzz" (귀여운 엠티 스테이트)
- **구독 만료**:
  - 최근 7일만 조회 가능
  - 이전 기록 조회 시 블러 처리 + 구독 유도 모달

---

## 5. 구현 시 주의사항

- 캘린더 라이브러리 스타일 커스터마이징 필요 (디자인 시스템 컬러 적용)
- 너무 많은 Dot으로 인한 시각적 피로 주의 (우선순위: 경고 > 투약 > 일반)
